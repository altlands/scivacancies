@using System.Threading.Tasks
@using SciVacancies
@using SciVacancies.WebApp.ViewModels
@model VacancyDetailsViewModel

<div class="title-cat-inform">Специализация:</div>
<ul class="list-information layout-inform">
    <li class="even">
        <span>Статус:</span>@Model.Status.GetDescription(User)

    </li>
    <li class="odd">

        <div>
            @if (!string.IsNullOrWhiteSpace(Model.CloseReason))
            {
                <text>
                <div class="section-eval">
                    <span class="name-section">Решение комиссии:</span>
                    <div class="list-fields">
                        <div>
                            <div class="field">
                                @Model.CloseReason
                            </div>
                        </div>
                    </div>
                </div>
                </text>
            }

            @if (Model.Attachments != null && Model.Attachments.SelectProtocols().Any())
            {
                <text>
                <div class="section-eval">
                    <span class="name-section">Протокол(ы) решения комиссии:</span>
                    <div class="list-fields">
                        @foreach (var item in Model.Attachments.SelectVacancyFiles())
                        {
                            <text>
                            <div>
                                <div class="field">
                                    <div class="section-eval">
                                        @item.name <span class="small-icon icon-sm-download"><a href="@(Model.FolderApplicationsAttachmentsUrl + item.url)">Скачать</a></span>
                                    </div>
                                </div>
                            </div>
                            </text>
                        }
                    </div>
                </div>
                </text>
            }

        </div>
    </li>
    <li class="even">
        <span>Должность:</span>@Model.Name
    </li>
    <li class="odd">
        <span>Полное наименование:</span>@Model.FullName
    </li>
    <li class="even">
        <span>Отрасль науки:</span>@Model.ResearchDirection
    </li>
    <li class="odd">
        <span>Тематика исследований:</span>@Model.ResearchTheme
    </li>
</ul>

<div class="title-cat-inform">Задачи и критерии:</div>
<ul class="list-information layout-inform">
    <li class="odd">
        <span>Задачи:</span>@Model.Tasks
    </li>
    <li class="even">
        <span>Критерии оценки:</span>
        <div>
            @if (Model.CriteriasHierarchy != null)
            {
                foreach (CriteriaItemViewModel group in Model.CriteriasHierarchy.Where(c => c.Items.Sum(d => d.Count) > 0))
                {
                    <div class="section-eval">
                        <span class="name-section">@(@group.Title) (@(@group.Items.Count(c => c.Count > 0)))</span>
                        <div class="list-fields">

                            @foreach (CriteriaItemViewModel item in @group.Items.Where(c => c.Count > 0))
                    {
                                <div>
                                    <div class="field">
                                        &nbsp; &mdash; &nbsp;
                                        @item.Title:
                                        @item.Count шт.
                                    </div>
                                </div>
                            }
                        </div>

                    </div>
                }
            }
        </div>
    </li>
</ul>

<div class="title-cat-inform">Условия:</div>
<ul class="list-information layout-inform">
    <li class="odd">
        <span>Заработная плата:</span>@Model.SalaryFrom - @Model.SalaryTo рублей/месяц
    </li>
    <li class="even">
        <span>Стимулирующие выплаты:</span>@Model.Bonuses
    </li>
    <li class="odd">
        <span>Трудовой договор:</span>@Model.ContractType.GetDescription()
    </li>
    <li class="even">
        <span>Социальный пакет:</span>@(Model.SocialPackage ? "Да" : "Нет")
    </li>
    <li class="odd">
        <span>Найм жилья:</span>@(Model.Rent ? "Да" : "Нет")
    </li>
    <li class="even">
        <span>Компенсация проезда:</span>@(Model.TransportCompensation ? "Да" : "Нет")
    </li>
</ul>



<div class="title-cat-inform">Прикреплённые файлы:</div>
<ul class="list-information layout-inform">
    <li class="even">
        <span>Файлы:</span>
        <div>
            @if (Model.Attachments != null)
            {
                foreach (var item in Model.Attachments.SelectVacancyFiles())
                {
                    <div class="section-eval">
                        @item.name <span class="small-icon icon-sm-download"><a href="@(Model.FolderApplicationsAttachmentsUrl + item.url)">Скачать</a></span>
                    </div>
                }
            }
        </div>
    </li>
</ul>

<div class="title-cat-inform">Лицо для получения дополнительных справок:</div>
<ul class="list-information layout-inform">
    <li class="odd">
        <span>Фамилия, имя, отчество:</span>@Model.ContactName
    </li>
    <li class="even">
        <span>E-mail:</span>@Model.ContactEmail
    </li>
    <li class="odd">
        <span>Телефон:</span>@Model.ContactPhone
    </li>
</ul>