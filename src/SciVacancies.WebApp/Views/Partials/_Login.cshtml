@model AccountLoginViewModel
@using System.Threading.Tasks
@using Microsoft.AspNet.Http
@using SciVacancies.WebApp.Controllers
@using SciVacancies.WebApp.ViewModels


@if (string.IsNullOrWhiteSpace(Context.Request.HttpContext.Session.GetString(AccountController.UserNameKey)))
{
    bool isResearcher;
    if (bool.TryParse(Context.Request.HttpContext.Session.GetString(AccountController.IsResearcherKey), out isResearcher))
    {
        isResearcher = false;
    }

    <div class="control control-registration">
        <a asp-controller="@(isResearcher ? "researchers" : "organizations")" asp-action="account" asp-route-username="nikita" class="enter-head open-popup"><span class="dashed italic">Вход в Личный кабинет</span></a>
        <div class="sub-control">
            <a asp-controller="account" asp-action="register" class="underline">Регистрация</a>
            <a asp-controller="account" asp-action="forgotpassword" class="underline">Забыли пароль?</a>
        </div>
    </div>

    <div class="window-popup middle" style="display:none;">
        <span class="close-popup"></span>
        <div class="title-popup">
            <h4>Вход в личный кабинет</h4>
        </div>
        <div class="content-popup">
            <form asp-controller="account" asp-action="login" method="POST">
                <div class="b-tabs">
                    <ul class="nav nav-tabs" id="tab">
                        <li>
                            <input type="radio" id="IsResearcher1" name="IsResearcher" value="true" checked="checked" />
                            <a href="#b-user">Пользователь</a>
                        </li>
                        <li>
                            <input type="radio" id="IsResearcher2" name="IsResearcher" value="false" />
                            <a href="#b-organization">Организация</a>
                        </li>
                    </ul>
                    <div class="tab-content">
                        <div class="tab-pane" id="b-user">
                            <p>Для зарегистрированных пользователей (соискателей) - введите в форму входа логин и пароль, полученные при регистрации на Портале.</p>
                            <a asp-controller="acccount" asp-action="register" class="italic">Регистрация</a><br />
                            <a asp-controller="acccount" asp-action="forgotpassword" class="italic">Забыли пароль?</a>
                        </div>
                        <div class="tab-pane" id="b-organization">
                            <p>
                                Для входа в личный кабинет представителя Организации необходимо в соответствующие поля ввести логин и пароль, полученные на сайте <a href="#">Федеральной системы мониторинга результативности деятельности научных организаций</a> (ФСМНО)
                            </p>
                        </div>
                    </div>
                </div>
                <div class="form-line">
                    <input asp-for="Login" class="long-input" placeholder="Логин (e-mail)" />
                </div>

                <div class="form-line">
                    <input asp-for="Password" class="long-input" placeholder="Пароль" />
                </div>

                <div class="ctr-buttons">
                    <input type="submit" class="green-btn middle-icon icon-arr-right" value="Войти" />
                    <span id="cancellogin" class="blue-btn middle-icon icon-close">Отмена</span>
                </div>
            </form>
        </div>
    </div>
}
else
{
    <div class="control">
        <a asp-controller="researcher" asp-action="account" class="cab-head">
            <span class="lk-head-icon" id="lk" rel="tooltip"></span>
            <span class="underline white italic">Личный кабинет</span>
        </a>
        <div id="lk-popover" style="display: none; text-align: center;">
            Есть новые уведомления!
        </div>
        <a asp-controller="account" asp-action="logout" class="close-head"><span class="dashed white italic">Выход</span></a>
    </div>
}
